<plugin resizable="true">
	<vbox spacing="4">
		<grid rows="2" cols="5" vspacing="4" hspacing="4" expand="true">
			<group ui:inject="GraphGroup" ipadding="0" expand="true" fill="true" text="labels.graphs.spectrum">
				<graph width.min="640" height.min="320" expand="true" fill="true">
					<origin hpos="-1" vpos="-1" visible="false"/>

					<!-- Additional grid -->
					<ui:with color="graph_alt_1">
						<ui:for id="f" first="20" last="90" step="10">
							<marker v="${:f}"/>
							<marker v="${:f*10}"/>
							<marker v="${:f*100}"/>
						</ui:for>
						<marker v="20000"/>
						<ui:with ox="1" oy="0">
							<marker v="+12 db"/>
							<marker v="-12 db"/>
							<marker v="-36 db"/>
							<marker v="-60 db"/>

							<ui:for id="g" first="-42" last="6" step="12">
								<marker v="${g} db" visibility=":zoom le -9 db"/>
							</ui:for>
							<ui:for id="g" first="-21" last="3" step="6">
								<marker v="${g} db" visibility=":zoom le -15 db"/>
							</ui:for>
						</ui:with>
					</ui:with>

					<!-- Secondary grid -->
					<ui:with color="graph_sec">
						<marker v="100"/>
						<marker v="1000"/>
						<marker v="10000"/>
						<marker value="0 db" ox="1" oy="0"/>
						<marker value="-24 db" ox="1" oy="0"/>
						<marker value="-48 db" ox="1" oy="0"/>
					</ui:with>
					
					<!-- Band split markers -->
					<ui:with
						width="2"
						hwidth="2"
						fill="0.5"
						color.a="0.2"
						hcolor.a="0.1"
						lcolor.a="0.8"
						hlcolor.a="0.6"
						rcolor.a="0.8"
						hrcolor.a="0.6"
						color="graph_marker_cycle"
						hcolor="graph_marker_cycle"
						lcolor="graph_marker_cycle"
						hlcolor="graph_marker_cycle"
						rcolor="graph_marker_cycle"
						hrcolor="graph_marker_cycle">

						<marker v="10" color.hue="0" hcolor.hue="0" rborder="16" hrborder="16" rcolor.hue="0" hrcolor.hue="0"/>
						<marker id="sf1" editable="true" pointer="hsize" color.hue="0" hcolor.hue="0" lborder="16" hlborder="16" lcolor.hue="0" hlcolor.hue="0" rborder="16" hrborder="16" rcolor.hue="0.25" hrcolor.hue="0.25"/>
						<marker id="sf2" editable="true" pointer="hsize" color.hue="0.25" hcolor.hue="0.25" lborder="16" hlborder="16" lcolor.hue="0.25" hlcolor.hue="0.25" rborder="16" hrborder="16" rcolor.hue="0.5" hrcolor.hue="0.5"/>
						<marker id="sf3" editable="true" pointer="hsize" color.hue="0.5" hcolor.hue="0.5" lborder="16" hlborder="16" lcolor.hue="0.5" hlcolor.hue="0.5" rborder="16" hrborder="16" rcolor.hue="0.75" hrcolor.hue="0.75" visibility=":ebe"/>
						<marker v="24000" color.hue="(:ebe) ? 0.75 : 0.5" hcolor.hue="(:ebe) ? 0.75 : 0.5" lborder="16" hlborder="16" lcolor.hue="(:ebe) ? 0.75 : 0.5" hlcolor.hue="(:ebe) ? 0.75 : 0.5"/>
					</ui:with>

					<!-- Meshes -->
					<ui:for id="i" first="1" count="4">
						<mesh
							id="bfc_${i}"
							width="2"
							fill="true"
							smooth="true"
							color="graph_mesh_cycle"
							color.hue="${(:i-1) * 0.25}"
							fcolor="graph_mesh_cycle"
							fcolor.hue="${(:i-1) * 0.25}"
							color.a="0.6"
							fcolor.a="0.9"
							visibility="${(:i lt 4) ? ':flt' : ':flt and :ebe'}"/>
					</ui:for>
					
					<mesh id="ifg_l" width="0" color="left_in" color.a="0.8" fcolor.a="0.8" fill="true" fcolor="left_in" visibility=":ife_l"/>
					<mesh id="ifg_r" width="0" color="right_in" color.a="0.8" fcolor.a="0.8" fill="true" fcolor="right_in" visibility=":ife_r"/>
					<mesh id="ofg_l" width="2" color="left" visibility=":ofe_l"/>
					<mesh id="ofg_r" width="2" color="right" visibility=":ofe_r"/>

					<!-- mesh id="ag_l" width="3" color="left" smooth="true" />
					<mesh id="ag_r" width="3" color="right" smooth="true" / -->

					<!-- Boundaries -->
					<marker v="1" ox="2" oy="0" color="graph_prim" visibility="false"/>
					<marker v="24000" color="graph_prim" visibility="false"/>

					<!-- Axis -->
					<axis min="10" max="24000" angle="0.0" log="true" visibility="false"/>
					<axis min="-72 db / (:zoom ** 3)" max="24 db * :zoom" color="graph_prim" angle="0.5" log="true"/>
					<axis min="-1" max="1" visibility="false" angle="0.5"/>
					<axis min="-72 db" max="24 db" color="graph_prim" angle="0.5" log="true" visibility="false"/>

					<!-- Text -->
					<ui:with ox="0" oy="2" y="0" halign="1" valign="1">
					  <text x="10" text="graph.units.hz"/>
					  <text x="20" text="20"/>
					  <text x="30" text="30"/>
					  <text x="50" text="50"/>
					  <text x="100" text="100"/>
					  <text x="200" text="200"/>
					  <text x="300" text="300"/>
					  <text x="500" text="500"/>
					  <text x="1000" text="graph.values.x_k" text:value="1"/>
					  <text x="2000" text="graph.values.x_k" text:value="2"/>
					  <text x="3000" text="graph.values.x_k" text:value="3"/>
					  <text x="5000" text="graph.values.x_k" text:value="5"/>
					  <text x="10000" text="graph.values.x_k" text:value="10"/>
					  <text x="20000" text="graph.values.x_k" text:value="20"/>
					</ui:with>

					<ui:with x="10" halign="1" valign="1">
						<ui:for id="g" first="-60" last="12" step="12">
							<text y="${g} db" text="${g}"/>
						</ui:for>
						<text y="0 db" ox="0" oy="2" text="graph.units.db" valign="-1"/>
						<ui:for id="g" first="-42" last="6" step="12">
							<text y="${g} db" text="${g}" visibility=":zoom le -9 db"/>
						</ui:for>
						<ui:for id="g" first="-21" last="3" step="6">
							<text y="${g} db" text="${g}" visibility=":zoom le -15 db"/>
						</ui:for>
					</ui:with>
				</graph>
			</group>
			<!-- zoom -->
			<cell rows="2">
				<vbox vexpand="true" bg.color="bg_schema">
					<label font.name="lsp-icons" font.size="12" font.antialias="true" text="E" color="text_icon" pad.b="4" pad.t="4"/>
					<fader id="zoom" angle="1" vexpand="true" bg.inherit="true" flat="true"/>
					<value id="zoom" width="40"/>
				</vbox>
			</cell>
			<!-- meter in -->
			<cell rows="2">
				<vbox vexpand="true" bg.color="bg_schema">
					<label text="labels.chan.in" pad.b="3" pad.t="3"/>
					<ledmeter vexpand="true" angle="1">
						<ledchannel id="ilm_l" min="-72 db" max="12 db" log="true" type="rms_peak" peak.visibility="true" value.color="left_in"/>
						<ledchannel id="ilm_r" min="-72 db" max="12 db" log="true" type="rms_peak" peak.visibility="true" value.color="right_in"/>
					</ledmeter>
				</vbox>
			</cell>
			<!-- meter out -->
			<cell rows="2">
				<vbox vexpand="true" bg.color="bg_schema">
					<label text="labels.chan.out" pad.b="3" pad.t="3"/>
					<ledmeter vexpand="true" angle="1">
						<ledchannel id="olm_l" min="-72 db" max="12 db" log="true" type="rms_peak" peak.visibility="true" value.color="left"/>
						<ledchannel id="olm_r" min="-72 db" max="12 db" log="true" type="rms_peak" peak.visibility="true" value.color="right"/>
					</ledmeter>
				</vbox>
			</cell>
			<cell rows="2">
				<!-- Analysis -->
				<group text="groups.analysis" expand="true" ipadding="0">
					<vbox>
						<grid rows="4" cols="2">
							<align halign="-1" pad.t="4" pad.l="6">
								<label text="labels.fft.fft_in"/>
							</align>
							<hbox spacing="4" pad.v="4" pad.h="6" hfill="false"><button id="ife_l" text="labels.chan.L_eft" size="19" ui:inject="Button_left_8"/>
								<button id="ife_r" text="labels.chan.R_ight" size="19" ui:inject="Button_right_8"/></hbox>
	
							<cell cols="2"><hsep pad.v="2" bg.color="bg" vreduce="true"/></cell>
	
							<align halign="-1" pad.t="4" pad.l="6">
								<label text="labels.fft.fft_out" halign="0"/>
							</align>
							<hbox spacing="4" pad.v="4" pad.h="6" hfill="false"><button id="ofe_l" text="labels.chan.L_eft" size="19" ui:inject="Button_left_8"/>
								<button id="ofe_r" text="labels.chan.R_ight" size="19" ui:inject="Button_right_8"/></hbox>
	
							<cell cols="2"><hsep pad.v="2" bg.color="bg" vreduce="true"/></cell>
						</grid>
	
						<grid rows="2" cols="2" transpose="false" expand="true" hspacing="4">
							<knob id="react" size="20" pad.r="4" pad.l="6"/>
							<vbox vfill="false" pad.r="6">
								<label text="labels.metering.reactivity" halign="0"/>
								<value id="react" width.min="50" sline="true" halign="0"/>
							</vbox>
	
							<knob id="shift" size="20" pad.r="4" pad.l="6"/>
							<vbox vfill="false" pad.r="6">
								<label text="labels.metering.shift" halign="0"/>
								<value id="shift" width.min="50" sline="true" halign="0"/>
							</vbox>
						</grid>
					</vbox>
				</group>
			</cell>

			<!-- bottom line -->
			<hbox vreduce="true">
				<hbox spacing="4" vreduce="true" bg.color="bg_schema" pad.h="6">
					<label text="labels.mode:"/>
					<combo id="mode" pad.r="8" pad.v="4"/>
					<button id="flt" text="labels.filters" size="22" ui:inject="Button_cyan"/>
					<label text="labels.slope" />
					<combo id="slope" pad.r="8" pad.v="4"/>
				</hbox>
				<vsep pad.h="2" bg.color="bg" reduce="true" />
				<void hexpand="true" bg.color="bg_schema" />
			</hbox>
		</grid>
		<grid rows="2" cols="2" spacing="4">
			<cell cols="2">
				<group text="Crossover">
					<grid rows="4" cols="8">
						<!-- Row 1 -->
						<cell rows="2">
							<label text="labels.input" />
						</cell>
						<label text="labels.flt.HPF" />
						<label text="Band 1" />
						<label text="Band 2" />
						<label text="Band 3" />
						<button id="ebe" text="Band 4" ui:inject="Button_cyan" />
						<label text="labels.flt.LPF" />
						<cell rows="2">
							<label text="labels.output" />
						</cell>
						
						<combo id="hpf_m" />
						<ui:for id="i" first="1" count="4">
							<hbox>
								<button id="bs_${i}" text="labels.chan.S_olo" height="19" hfill="true" ui:inject="Button_green_8" />
								<button id="bm_${i}" text="labels.chan.M_ute" height="19" hfill="true" ui:inject="Button_red_8" pad.l="4"/>
							</hbox>
						</ui:for>
						<combo id="lpf_m" />
						
						<!-- Row 3 -->
						<knob id="g_in" />
						<knob id="hpf_f" />
						<void />
						<knob id="sf1" />
						<knob id="sf2" />
						<knob id="sf3" />
						<knob id="lpf_f" />
						<knob id="g_out" />
						
						<!-- Row 4 -->
						<value id="g_in" />
						<value id="hpf_f" />
						<void />
						<value id="sf1" />
						<value id="sf2" />
						<value id="sf3" />
						<value id="lpf_f" />
						<value id="g_out" />
					</grid>
				</group>
			</cell>
			<tabs id="bsel">
				<ui:for id="i" first="1" count="4">
					<vbox>
						<!-- Controls -->
						<hbox>
							<grid rows="3" cols="9">
								<!-- Row 1 -->
								<label text="ODP" />
								<label text="Thresh" />
								<label text="Knee" />
								<label text="Resonance" />
								<label text="Makeup" />
								
								<label text="Sigmoid" />
								<label text="Function" />
								<label text="Threshold" />
								<label text="Pumping" />
								
								<!-- Row 2 -->
								<button id="s_${i}" text="ON" />
								<knob id="th_${i}" />
								<knob id="kn_${i}" />
								<knob id="rs_${i}" />
								<knob id="mk_${i}" />
								
								<vbox>
									<button id="se_${i}" text="ON" />
									<button id="sl_${i}" text="LOG" />
								</vbox>
								<combo id="sf_${i}" />
								<knob id="st_${i}" />
								<knob id="sp_${i}" />
								
								<!-- Row 3 -->
								<void />
								<value id="th_${i}" />
								<value id="kn_${i}" />
								<value id="rs_${i}" />
								<value id="mk_${i}" />
								
								<void />
								<void />
								<value id="st_${i}" />
								<value id="sp_${i}" />
							</grid>
						</hbox>
					
						<hbox>
							<!-- Overdrive protection graph -->
							<graph width.min="192" height.min="192" expand="true" fill="true">
								<origin hpos="-1" vpos="-1" visible="false"/>
			
								<!-- Gray grid -->
								<ui:for id="g" first="-15" last="3" step="6">
									<marker v="${g} db" color="graph_alt_1"/>
									<marker v="${g} db" ox="1" oy="0" color="graph_alt_1"/>
								</ui:for>
			
								<!-- Yellow grid -->
								<ui:for id="g" first="-12" last="-6" step="6">
									<marker v="${g} db" color="graph_sec"/>
									<marker v="${g} db" ox="1" oy="0" color="graph_sec"/>
								</ui:for>
			
								<!-- Axes and boundaries -->
								<marker v="1" ox="1" oy="0" dv="1" dx=":_a_width" dy=":_a_height" color="graph_alt_1" width="2" smooth="true"/>
								<axis min="-18 db" max="6 db" color="graph_prim" angle="0.0" log="true" visibility="false"/>
								<axis min="-18 db" max="6 db" color="graph_prim" angle="0.5" log="true" visibility="false"/>
								<axis min="-18" max="6" zero="-18" color="graph_prim" angle="0.0" visibility="false"/>
			
								<!-- 0 dB markers -->
								<marker v="0 db" ox="0" oy="1" width="2" color="graph_prim"/>
								<marker v="0 db" ox="1" oy="0" width="2" color="graph_prim"/>
			
								<!-- Meshes -->
								<mesh id="opc_${i}" width="3" color="graph_mesh" smooth="true"/>
								<!-- dot x.id="elm_l" y.id="clm_l" color="graph_mesh" bcolor="graph_mesh" visibility="!:ssplit"/>
								<dot x.id="elm_l" y.id="clm_l" color="left" bcolor="left" visibility=":ssplit"/>
								<dot x.id="elm_r" y.id="clm_r" color="right" bcolor="right" visibility=":ssplit"/-->
			
								<!-- Markers -->
								<marker id="th_${i}" ox="2" width="2" color="attack_1" editable="true" />
			
								<!-- Text -->
								<text x="0 db" y="0 db" text="0" halign="1" valign="1"/>
								<ui:attributes x="0 db" halign="1" valign="-1">
									<text y="6 db" text="graph.units.db"/>
									<text y="3 db" text="+3"/>
									<text y="-3 db" text="-3"/>
									<text y="-6 db" text="-6"/>
									<text y="-9 db" text="-9"/>
									<text y="-12 db" text="-12"/>
									<text y="-15 db" text="-15"/>
									<text y="-18 db" text="graph.axis.out" valign="1"/>
								</ui:attributes>
								<ui:attributes y="0 db" halign="-1" valign="1">
									<text x="6 db" text="graph.units.db"/>
									<text x="3 db" text="+3"/>
									<text x="-3 db" text="-3"/>
									<text x="-6 db" text="-6"/>
									<text x="-9 db" text="-9"/>
									<text x="-12 db" text="-12"/>
									<text x="-15 db" text="-15"/>
									<text x="-18 db" text="graph.axis.in" halign="1"/>
								</ui:attributes>
								<text x=":th_${i}" y="-18 db" ox="2"
									text="graph.values.x:db:f" text:value=":th_${i}" text.eval="true"
									color="attack_1"
									halign="(:th_${i} lt -6) ? 1 : -1" valign="1"/>
							</graph>
							
							<!-- Clipper function graph -->
							<graph width.min="192" height.min="192" expand="true" fill="true" visibility="!:sl_${i}">
								<origin hpos="0" vpos="0" visible="false"/>
								<origin hpos="-1" vpos="0" visible="false"/>
			
								<ui:with ox="0" oy="1">
									<marker v="-1.75" color="graph_alt_1"/>
									<marker v="-1.25" color="graph_alt_1"/>
									<marker v="-0.75" color="graph_alt_1"/>
									<marker v="-0.25" color="graph_alt_1"/>
									<marker v="0.25" color="graph_alt_1"/>
									<marker v="0.75" color="graph_alt_1"/>
									<marker v="1.25" color="graph_alt_1"/>
									<marker v="1.75" color="graph_alt_1"/>
								</ui:with>
								<ui:with ox="1" oy="0">
									<marker v="-0.75" color="graph_alt_1"/>
									<marker v="-0.25" color="graph_alt_1"/>
									<marker v="0.25" color="graph_alt_1"/>
									<marker v="0.75" color="graph_alt_1"/>
								</ui:with>
			
								<ui:with ox="0" oy="1">
									<marker v="-1.5" color="graph_sec"/>
									<marker v="-1" color="graph_sec"/>
									<marker v="-0.5" color="graph_sec"/>
									<marker v="0.5" color="graph_sec"/>
									<marker v="1" color="graph_sec"/>
									<marker v="1.5" color="graph_sec"/>
								</ui:with>
								<ui:with ox="1" oy="0">
									<marker v="-1" color="graph_sec"/>
									<marker v="-0.5" color="graph_sec"/>
									<marker v="0.5" color="graph_sec"/>
									<marker v="1" color="graph_sec"/>
								</ui:with>
			
								<!-- Axes and boundaries -->
								<marker v="1" ox="1" oy="0" dv="1" dx=":_a_width * 0.625" dy=":_a_height" color="graph_alt_1" width="2" smooth="true"/>
								<axis min="-2" max="2" color="graph_prim" angle="0.0" width="2" />
								<axis min="-1.25" max="1.25" color="graph_prim" angle="0.5" width="2" />
								<axis o="1" min="-2" max="2" color="graph_prim" angle="0.0" zero="-2" visibility="false" />
			
								<!-- Meshes -->
								<mesh id="sfc_${i}" x.index="0" y.index="1" width="3" color="graph_mesh" smooth="true"/>
								<!-- dot x.id="elm_l" y.id="clm_l" color="graph_mesh" bcolor="graph_mesh" visibility="!:ssplit"/>
								<dot x.id="elm_l" y.id="clm_l" color="left" bcolor="left" visibility=":ssplit"/>
								<dot x.id="elm_r" y.id="clm_r" color="right" bcolor="right" visibility=":ssplit"/-->
			
								<!-- Markers -->
								<marker id="st_${i}" o="1" ox="2" width="2" color="attack_1" editable="true" />
			
								<!-- Text -->
								<text x="0" y="0" text="0" halign="1" valign="1"/>
								<ui:attributes x="0" halign="-1" valign="-1">
									<text y="-1" text="-1"/>
									<text y="-0.5" text="-0.5"/>
									<text y="0" text="0"/>
									<text y="0.5" text="0.5"/>
									<text y="1" text="1"/>
									<text y="1.25" text="graph.axis.out" valign="-1"/>
								</ui:attributes>
								<ui:attributes y="0" halign="1" valign="-1">
									<text x="-2" text="2"/>
									<text x="-1.5" text="-1.5"/>
									<text x="-1.0" text="-1.0"/>
									<text x="-0.5" text="-0.5"/>
									<text x="0.5" text="0.5"/>
									<text x="1.0" text="1"/>
									<text x="1.5" text="1.5"/>
									<text x="2" text="graph.axis.in" halign="-1"/>
								</ui:attributes>
								<text x=":st_${i}" y="1.25"
									text="graph.values.x::f" text:value=":st_${i}" text.eval="true"
									color="attack_1"
									halign="1" valign="-1"/>
								<text x=":st_${i}" y="-1.25"
									text="graph.values.x:db:f" text:value="20 * lg :st_${i}" text.eval="true"
									color="attack_1"
									halign="1" valign="1"/>
							</graph>
							
							<graph width.min="192" height.min="192" expand="true" fill="true" visibility=":sl_${i}">
								<origin hpos="-1" vpos="-1" visible="false"/>
			
								<!-- Gray grid -->
								<ui:for id="g" first="-30" last="6" step="12">
									<marker v="${g} db" color="graph_alt_1"/>
									<marker v="${g} db" ox="1" oy="0" color="graph_alt_1"/>
								</ui:for>
			
								<!-- Yellow grid -->
								<ui:for id="g" first="-24" last="-12" step="12">
									<marker v="${g} db" color="graph_sec"/>
									<marker v="${g} db" ox="1" oy="0" color="graph_sec"/>
								</ui:for>
			
								<!-- Axes and boundaries -->
								<marker v="1" ox="1" oy="0" dv="1" dx=":_a_width" dy=":_a_height" color="graph_alt_1" width="2" smooth="true"/>
								<axis min="-36 db" max="12 db" color="graph_prim" angle="0.0" log="true" visibility="false"/>
								<axis min="-36 db" max="12 db" color="graph_prim" angle="0.5" log="true" visibility="false"/>
			
								<!-- 0 dB markers -->
								<marker v="0 db" ox="0" oy="1" width="2" color="graph_prim"/>
								<marker v="0 db" ox="1" oy="0" width="2" color="graph_prim"/>
			
								<!-- Meshes -->
								<mesh id="sfc_${i}" x.index="2" y.index="3" width="3" color="graph_mesh" smooth="true"/>
			
								<!-- Markers -->
								<marker id="st_${i}" color="attack_1" width="2" editable="true" />
			
								<!-- Text -->
								<text x="0 db" y="0 db" text="0" halign="1" valign="1"/>
								<ui:attributes x="0 db" halign="1" valign="-1">
									<text y="12 db" text="graph.units.db"/>
									<text y="6 db" text="+6"/>
									<text y="-6 db" text="-6"/>
									<text y="-12 db" text="-12"/>
									<text y="-18 db" text="-18"/>
									<text y="-24 db" text="-24"/>
									<text y="-30 db" text="-30"/>
									<text y="-36 db" text="graph.axis.out" valign="1"/>
								</ui:attributes>
								<ui:attributes y="0 db" halign="-1" valign="1">
									<text x="12 db" text="graph.units.db"/>
									<text x="6 db" text="+6"/>
									<text x="-6 db" text="-6"/>
									<text x="-12 db" text="-12"/>
									<text x="-18 db" text="-18"/>
									<text x="-24 db" text="-24"/>
									<text x="-30 db" text="-30"/>
									<text x="-36 db" text="graph.axis.in" halign="1"/>
								</ui:attributes>
								
								<text x=":st_${i}" y="12 db"
									text="graph.values.x::f" text:value=":st_${i}" text.eval="true"
									color="attack_1"
									halign="(:st_${i} lt -12 db) ? 1 : -1" valign="-1"/>
								<text x=":st_${i}" y="-36 db"
									text="graph.values.x:db:f" text:value="20 * lg :st_${i}" text.eval="true"
									color="attack_1"
									halign="(:st_${i} lt -12 db) ? 1 : -1" valign="1"/>
							</graph>
						</hbox>
					</vbox>
				</ui:for>
			</tabs>
			<group text="Clipper">
			</group>
		</grid>
	</vbox>
</plugin>
